{
    "builders": [{
        "accelerator": "{{user `qemu_accelerator`}}",
        "boot_command": [
            "<esc><wait>",
            "install <wait>",
            " preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg <wait>",
            "debian-installer=en_US.UTF-8 <wait>",
            "auto <wait>",
            "locale=en_US.UTF-8 <wait>",
            "kbd-chooser/method=us <wait>",
            "keyboard-configuration/xkb-keymap=us <wait>",
            "netcfg/get_hostname=vm <wait>",
            "netcfg/get_domain=tansiv <wait>",
            "fb=false <wait>",
            "debconf/frontend=noninteractive <wait>",
            "console-setup/ask_detect=false <wait>",
            "console-keymaps-at/keymap=us <wait>",
            "grub-installer/bootdev=/dev/vda <wait>",
            "<enter><wait>"
        ],
        "boot_wait": "15s",
        "disk_size": "{{user `disk_size`}}",
        "headless": "{{user `headless`}}",
        "http_directory": "{{user `http_directory`}}",
        "iso_checksum": "{{user `iso_checksum_type`}}:{{user `iso_checksum`}}",
        "iso_url": "{{user `iso_url`}}",
        "output_directory": "packer-{{user `template`}}-qemu",
        "qemuargs": [
            [
                "-m",
                "1024M"
            ]
        ],
        "shutdown_command": "{{user `shutdown_command`}}",
        "ssh_password": "{{user `ssh_password`}}",
        "ssh_timeout": "10000s",
        "ssh_username": "{{user `ssh_username`}}",
        "type": "qemu",
        "vm_name": "{{ user `template` }}.qcow2"
    }],
    "description": "Debian 10 amd64",
    "provisioners": [{
        "execute_command": "echo 'tansiv' | {{.Vars}} sudo -S -E sh -eux '{{.Path}}'",
        "scripts": [
            "scripts/debian.sh",
            "scripts/minimize.sh"
        ],
        "type": "shell"
    }],
    "variables": {
        "disk_size": "102400",
        "headless": "true",
        "http_directory": "http/",
        "iso_checksum": "8488abc1361590ee7a3c9b00ec059b29dfb1da40f8ba4adf293c7a30fa943eb2",
        "iso_checksum_type": "sha256",
        "iso_url": "https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-11.1.0-amd64-netinst.iso",
        "qemu_accelerator": "kvm",
        "shutdown_command": "echo 'tansiv' | sudo -S shutdown -P now",
        "ssh_password": "tansiv",
        "ssh_username": "tansiv",
        "template": "debian-11.1.0-x86_64",
        "vm_basename": "debian-11"
    }
}